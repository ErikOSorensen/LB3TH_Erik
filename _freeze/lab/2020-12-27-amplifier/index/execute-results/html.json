{
  "hash": "d7145d7adf02a5cf64d2eaaf1faaeb78",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: A broadband (HF) amplifier, a step towards a logging power meter\ndate: 2020-12-27\n---\n\n# Background \n\nI want to make a meter for my amateur radio station that can log transmitted power, swr, and the transmitted\nfrequency to a file.  For the detector, I'll use a directional coupler with AD8307 log-amplifiers. I have \nsubmitted the gerber files from [DJ0ABR's site](https://dj0abr.de/english/technik/dds/epwrswrV2.htm) to \n[JLCPCB](https://jlcpcb.com/), this directional coupler makes the power measurement a matter of the reading\nthe DC-voltage coming of the forward and reflected log amplifiers. For detecting the frequency of transmission,\nand Arduino can easily count the frequency to the accuracy that I need. But the microcontroller needs some \npre-processing to read the frequency from the directional coupler.\n\nThe frequency counting issue was addressed by Larry Phipps, N8LP, in his [2006 QEX paper on the LP100](http://www.telepostinc.com/Files/phipps-1.pdf).\nHis solution is to amplify the forward measurement (by a lot), then limiting this, level shifting, and sending\nthis straight into a microcontroller. If I am to to count using an Arduino, I also need to divide down the frequency\nbefore sending the TTL level signal to the Arduino, but this shouldn't be a problem (with 74HC14 to square up the RF and an 74HC390 to divide\nthe frequency down to something the Arduino can count). I figured I should run the frequency detect amplifier of N8LP for a test.\n\nThe amplifier in question is a simple 3-transistor class A amplifier like this (with some value substitutions to reflect what I have on hand):\n\n![](images/bredband_crop_page1.png)\n\n# Building the amplifier\n\nI used this as an occasion to try out the construction technology I've seen\n[Thomas Knutsen, LA3PNA, use in a youtube video](https://youtu.be/qdc9N2Hags8).\nUsing the cutter disc that I have for my Dremel, I ended up with this:\n\n![Dremel-cut copper clad board](images/2020-12-27_18.22.44.jpg)\n\n\nEsthetically, this is only a partial success. And since my Dremel cut-off wheel was fairly large (a diameter\nof 38mm), it was difficult to avoid overshooting the cuts. And for Q2 and Q3, the T-joint for the\ntransistors have these overshoot where the collector is intended to go. This made it add some wires to\nthe installation of these transistors, and the end result is not beautiful. But after some fiddling around,\nit seems to work in this fairly ugly state (with 0805 for the capacitors and resistors):\n\n![Built up amplifier](images/2020-12-27_20.07.31.jpg)\n\n# Measurements\nHooking the amplifier up to 12V, it draws around 60mA. I used my HP8657A as a signal source and my Rigol 2072A\noscilloscope \nto measure the output (with an 10:1 probe). \n\nThe amplifier is fairly high impedance input and intended for a high impedance output. \nI used the oscilloscope as the load on the amplifier, and started with the signal generator set to a level of\n-60dBm at 1MHz. As expected, the gain of the amplifier dropped off with frequency; I re-adjusted the level out of the frequency generator as I adjusted the frequency from 1MHz to 30MHz. These are my measurements:\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-1-1.png){width=672}\n:::\n:::\n\n\nThe input impedance is high, and the load is also high impedance. To calculate\nthe gain in terms of voltage alone, I take into account that the input is twice\nthat of the indicated input power (since it is not divided by two in a 50-ohm termination).\n\nAdjusting for the increasing input power, I calculate the following gain based on the\nvoltage input and outputs:\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-2-1.png){width=672}\n:::\n:::\n\n\nThe discontinuities at 10 and 20 MHz might be due to compression/distortion at those those levels. \nTo conclude, the gain of the amplifier is severely decreasing in frequency. \n(This is a feature of the design not of weaknesses in my build, it is confirmed \nby simulations in LTSpice.) But the amplifier does provide about 43 dB at 30 MHz, sufficient to activate\nthe frequency counter (?). \n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}